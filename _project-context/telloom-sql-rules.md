| schema_name | table_name                        | policy_name                                                     | command_type | policy_roles    | using_expression                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | with_check_expression                                                                                                                                                                                                                                                                                                                                                                                                     |
| ----------- | --------------------------------- | --------------------------------------------------------------- | ------------ | --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public      | Entitlement                       | Allow SELECT on entitlements to all users                       | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | Delete follow requests                                          | DELETE       | {public}        | ((auth.uid() = "requestorId") OR (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "FollowRequest"."sharerId"))) OR (auth.uid() IN ( SELECT "ProfileExecutor"."executorId"
   FROM "ProfileExecutor"
  WHERE ("ProfileExecutor"."sharerId" = "FollowRequest"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | Executors can manage follow requests                            | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "FollowRequest"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | FollowRequest_delete_policy                                     | DELETE       | {public}        | ((auth.role() = 'ADMIN'::text) OR ((auth.uid() = "requestorId") OR has_sharer_access("sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | FollowRequest_select_policy                                     | SELECT       | {public}        | ((auth.role() = 'ADMIN'::text) OR ((auth.uid() = "requestorId") OR has_sharer_access("sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | FollowRequest_update_policy                                     | UPDATE       | {public}        | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("sharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("sharerId"))                                                                                                                                                                                                                                                                                                                                                          |
| public      | FollowRequest                     | Update follow requests                                          | UPDATE       | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "FollowRequest"."sharerId"))) OR (auth.uid() IN ( SELECT "ProfileExecutor"."executorId"
   FROM "ProfileExecutor"
  WHERE ("ProfileExecutor"."sharerId" = "FollowRequest"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | View follow requests                                            | SELECT       | {public}        | ((auth.uid() = "requestorId") OR ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "FollowRequest"."sharerId"))) OR (auth.uid() IN ( SELECT "ProfileExecutor"."executorId"
   FROM "ProfileExecutor"
  WHERE ("ProfileExecutor"."sharerId" = "FollowRequest"."sharerId")))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | create_follow_requests                                          | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((auth.uid() = "requestorId") AND (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "FollowRequest"."sharerId"))))                                                                                                                                                                                                                                                                                 |
| public      | FollowRequest                     | update_follow_requests                                          | UPDATE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "FollowRequest"."sharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | FollowRequest                     | view_follow_requests                                            | SELECT       | {authenticated} | ((auth.uid() = "requestorId") OR (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "FollowRequest"."sharerId") AND ("ProfileSharer"."profileId" = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Allow inserting invitations without profile                     | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Allow selecting own invitations                                 | SELECT       | {authenticated} | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Invitation"."sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Enable all for authenticated users                              | ALL          | {authenticated} | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Invitation"."sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Invitation"."sharerId")))                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Executors can manage invitations                                | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "Invitation"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Invitation_executor_policy                                      | ALL          | {public}        | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("sharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("sharerId"))                                                                                                                                                                                                                                                                                                                                                          |
| public      | Invitation                        | Invitation_inviter_policy                                       | ALL          | {public}        | ((auth.role() = 'ADMIN'::text) OR (("inviterId" = auth.uid()) OR has_sharer_access("sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ((auth.role() = 'ADMIN'::text) OR (("inviterId" = auth.uid()) OR has_sharer_access("sharerId")))                                                                                                                                                                                                                                                                                                                          |
| public      | Invitation                        | Invitation_select_policy                                        | SELECT       | {authenticated} | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("sharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Invitees can access invitations sent to them                    | SELECT       | {public}        | ("inviteeEmail" = ( SELECT "Profile".email
   FROM "Profile"
  WHERE ("Profile".id = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Inviters can access invitations they sent                       | ALL          | {public}        | ("inviterId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ("inviterId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | Invitation                        | Users can create invitations                                    | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((auth.uid() = "inviterId") AND (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer"."profileId" = auth.uid()) AND ("ProfileSharer".id = "Invitation"."sharerId")))) AND (role = ANY (ARRAY['LISTENER'::"Role", 'EXECUTOR'::"Role"])))                                                                                                                                                                    |
| public      | Invitation                        | Users can update own invitations                                | UPDATE       | {public}        | ((auth.uid() = "inviterId") OR (auth.uid() IN ( SELECT "Profile".id
   FROM "Profile"
  WHERE ("Profile".email = "Invitation"."inviteeEmail"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ((auth.uid() = "inviterId") OR (auth.uid() IN ( SELECT "Profile".id
   FROM "Profile"
  WHERE ("Profile".email = "Invitation"."inviteeEmail"))))                                                                                                                                                                                                                                                                          |
| public      | Invitation                        | Users can view invitations                                      | SELECT       | {public}        | ((auth.uid() = "inviterId") OR (auth.uid() IN ( SELECT "Profile".id
   FROM "Profile"
  WHERE ("Profile".email = "Invitation"."inviteeEmail"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Invitation                        | Users can view own invitations                                  | SELECT       | {public}        | ((auth.uid() = "inviterId") OR (auth.uid() IN ( SELECT "Profile".id
   FROM "Profile"
  WHERE ("Profile".email = "Invitation"."inviteeEmail"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | Notification_delete_policy                                      | DELETE       | {public}        | ((auth.role() = 'ADMIN'::text) OR ("userId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | Notification_insert_policy                                      | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((auth.role() = 'ADMIN'::text) OR ("userId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                |
| public      | Notification                      | Notification_select_policy                                      | SELECT       | {public}        | (is_admin() OR ("userId" = auth.uid()) OR (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((pe."sharerId" = ps.id)))
  WHERE ((ps."profileId" = "Notification"."userId") AND (pe."executorId" = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | Notification_update_policy                                      | UPDATE       | {public}        | ((auth.role() = 'ADMIN'::text) OR ("userId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ((auth.role() = 'ADMIN'::text) OR ("userId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                |
| public      | Notification                      | delete_own_notifications                                        | DELETE       | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | insert_own_notifications                                        | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | Notification                      | select_own_notifications                                        | SELECT       | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | service_role_create_notifications                               | INSERT       | {service_role}  | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Notification                      | update_own_notifications                                        | UPDATE       | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | Object                            | Listeners can view objects from accessible prompt responses     | SELECT       | {public}        | (EXISTS ( SELECT 1
   FROM "PromptResponse" pr
  WHERE ((pr.id = "Object"."promptResponseId") AND (pr."privacyLevel" = 'Public'::text) AND (EXISTS ( SELECT 1
           FROM "ProfileListener" pl
          WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = pr."profileSharerId") AND (pl."hasAccess" = true)))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Object                            | Sharers can access their own objects                            | SELECT       | {public}        | (("userId" = auth.uid()) OR (("promptResponseId" IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "Object"."promptResponseId") AND (ps."profileId" = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Object                            | Sharers can delete their own objects                            | DELETE       | {public}        | (("userId" = auth.uid()) OR (("promptResponseId" IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "Object"."promptResponseId") AND (ps."profileId" = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Object                            | Sharers can insert objects                                      | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((EXISTS ( SELECT 1
   FROM "ProfileRole"
  WHERE (("ProfileRole"."profileId" = auth.uid()) AND ("ProfileRole".role = 'SHARER'::"Role")))) AND (("userId" = auth.uid()) OR (("promptResponseId" IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "Object"."promptResponseId") AND (ps."profileId" = auth.uid()))))))) |
| public      | Object                            | Sharers can update their own objects                            | UPDATE       | {public}        | (("userId" = auth.uid()) OR (("promptResponseId" IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "Object"."promptResponseId") AND (ps."profileId" = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (("userId" = auth.uid()) OR (("promptResponseId" IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "Object"."promptResponseId") AND (ps."profileId" = auth.uid()))))))                                                                                                                                                 |
| public      | ObjectCategory                    | Allow SELECT on object categories to all users                  | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Offering                          | Allow SELECT on offerings to all users                          | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Package                           | Allow SELECT on packages to all users                           | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PersonTag                         | Executors can manage person tags                                | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "PersonTag"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PersonTag                         | PersonTag_executor_policy                                       | ALL          | {public}        | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                   |
| public      | PersonTag                         | person_tag_delete                                               | DELETE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "PersonTag"."profileSharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PersonTag                         | person_tag_insert                                               | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "PersonTag"."profileSharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                |
| public      | PersonTag                         | person_tag_select                                               | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "PersonTag"."profileSharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PersonTag                         | person_tag_update                                               | UPDATE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "PersonTag"."profileSharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "PersonTag"."profileSharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                |
| public      | Product                           | Allow SELECT on products to all users                           | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Admins can do anything                                          | ALL          | {public}        | (auth.role() = 'ADMIN'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | (auth.role() = 'ADMIN'::text)                                                                                                                                                                                                                                                                                                                                                                                             |
| public      | Profile                           | Allow individual users to SELECT their own profile              | SELECT       | {public}        | (id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Allow individual users to UPDATE their own profile              | UPDATE       | {public}        | (id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | (id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                         |
| public      | Profile                           | Executors can access sharer profiles                            | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((pe."sharerId" = ps.id)))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "Profile".id))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Executors can see all listeners and executors for their Sharer  | SELECT       | {authenticated} | ((id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" meexec
     JOIN "ProfileExecutor" otherexec ON ((meexec."sharerId" = otherexec."sharerId")))
  WHERE ((meexec."executorId" = auth.uid()) AND (otherexec."executorId" = "Profile".id)))) OR (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" meexec
     JOIN "ProfileListener" pl ON ((meexec."sharerId" = pl."sharerId")))
  WHERE ((meexec."executorId" = auth.uid()) AND (pl."listenerId" = "Profile".id)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Executors can view profiles of users connected to their sharer  | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (EXISTS ( SELECT 1
           FROM ( SELECT pl."listenerId" AS user_id
                   FROM "ProfileListener" pl
                  WHERE (pl."sharerId" IN ( SELECT pe2."sharerId"
                           FROM "ProfileExecutor" pe2
                          WHERE (pe2."executorId" = auth.uid())))
                UNION
                 SELECT pe3."executorId" AS user_id
                   FROM "ProfileExecutor" pe3
                  WHERE (pe3."sharerId" IN ( SELECT pe4."sharerId"
                           FROM "ProfileExecutor" pe4
                          WHERE (pe4."executorId" = auth.uid())))) connected_users
          WHERE (connected_users.user_id = pe.id))))))                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Profile_select_policy                                           | SELECT       | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ((id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((pe."sharerId" = ps.id)))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "Profile".id))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Profile_update_policy                                           | UPDATE       | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR (id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR (id = auth.uid()))                                                                                                                                                                                                                                                                                                                     |
| public      | Profile                           | Users can insert own profile                                    | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() = id)                                                                                                                                                                                                                                                                                                                                                                                                         |
| public      | Profile                           | Users can update own profile                                    | UPDATE       | {public}        | (auth.uid() = id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | (auth.uid() = id)                                                                                                                                                                                                                                                                                                                                                                                                         |
| public      | Profile                           | Users can view own profile                                      | SELECT       | {authenticated} | (auth.uid() = id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Users can view profiles                                         | SELECT       | {authenticated} | ((id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM "ProfileRole" pr
  WHERE ((pr."profileId" = "Profile".id) AND (pr.role = 'SHARER'::"Role")))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Users can view sharer profiles                                  | SELECT       | {authenticated} | ((EXISTS ( SELECT 1
   FROM "ProfileRole" pr
  WHERE ((pr."profileId" = "Profile".id) AND (pr.role = 'SHARER'::"Role")))) AND ((id <> auth.uid()) AND ((EXISTS ( SELECT 1
   FROM ("FollowRequest" fr
     JOIN "ProfileSharer" ps ON ((ps."profileId" = "Profile".id)))
  WHERE ((fr."requestorId" = auth.uid()) AND (fr."sharerId" = ps.id) AND (fr.status = 'PENDING'::follow_request_status)))) OR (EXISTS ( SELECT 1
   FROM ("ProfileListener" pl
     JOIN "ProfileSharer" ps ON ((ps."profileId" = "Profile".id)))
  WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = ps.id) AND (pl."hasAccess" = true)))) OR (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps."profileId" = "Profile".id)))
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = ps.id)))) OR (NOT (EXISTS ( SELECT 1
   FROM ("FollowRequest" fr
     JOIN "ProfileSharer" ps ON ((ps."profileId" = "Profile".id)))
  WHERE ((fr."requestorId" = auth.uid()) AND (fr."sharerId" = ps.id)))))))) | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | Users can view their own profile and SHARER profiles            | SELECT       | {public}        | ((auth.uid() = id) OR (EXISTS ( SELECT 1
   FROM "ProfileRole"
  WHERE (("ProfileRole"."profileId" = "Profile".id) AND ("ProfileRole".role = 'SHARER'::"Role")))) OR (EXISTS ( SELECT 1
   FROM "ProfileListener"
  WHERE (("ProfileListener"."listenerId" = auth.uid()) AND ("ProfileListener"."sharerId" IN ( SELECT "ProfileSharer".id
           FROM "ProfileSharer"
          WHERE ("ProfileSharer"."profileId" = "Profile".id)))))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" IN ( SELECT "ProfileSharer".id
           FROM "ProfileSharer"
          WHERE ("ProfileSharer"."profileId" = "Profile".id)))))) OR (EXISTS ( SELECT 1
   FROM "ProfileRole" pr
  WHERE ((pr."profileId" = "Profile".id) AND (pr.role = 'SHARER'::"Role")))))                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Profile                           | view_requestor_profiles                                         | SELECT       | {authenticated} | ((auth.uid() = id) OR (EXISTS ( SELECT 1
   FROM ("FollowRequest" fr
     JOIN "ProfileSharer" ps ON ((fr."sharerId" = ps.id)))
  WHERE ((fr."requestorId" = "Profile".id) AND (ps."profileId" = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM "FollowRequest" fr
  WHERE ((fr."requestorId" = auth.uid()) AND ("Profile".id IN ( SELECT "ProfileSharer"."profileId"
           FROM "ProfileSharer"
          WHERE ("ProfileSharer".id = fr."sharerId")))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileExecutor                   | Executors can access their own executor records                 | ALL          | {public}        | ("executorId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ("executorId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                               |
| public      | ProfileExecutor                   | Executors can manage their sharer relationships                 | ALL          | {authenticated} | (auth.uid() = "executorId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileExecutor                   | ProfileExecutor_admin_policy                                    | ALL          | {public}        | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileExecutor                   | ProfileExecutor_owner_policy                                    | ALL          | {public}        | ("executorId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ("executorId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                               |
| public      | ProfileExecutor                   | ProfileExecutor_sharer_direct_policy                            | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "ProfileExecutor"."sharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "ProfileExecutor"."sharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                        |
| public      | ProfileExecutor                   | Sharers can manage their executor relationships                 | ALL          | {authenticated} | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileExecutor"."sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileExecutor                   | Sharers can view their assigned executor                        | SELECT       | {public}        | ("sharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileExecutor                   | Users can manage executor relationships                         | ALL          | {public}        | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileExecutor"."sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileExecutor"."sharerId")))                                                                                                                                                                                                                                                                                 |
| public      | ProfileExecutor                   | Users can view executor relationships                           | SELECT       | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileExecutor"."sharerId"))) OR (auth.uid() = "executorId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileExecutor                   | Users can view their own executor relationships                 | SELECT       | {authenticated} | ((auth.uid() = "executorId") OR (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileExecutor"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileListener                   | Executors can manage listener relationships                     | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "ProfileListener"."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileListener                   | Executors can view listener relationships for their sharer      | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = pe."sharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileListener                   | Listeners can access their own follow records                   | ALL          | {public}        | ("listenerId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ("listenerId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                               |
| public      | ProfileListener                   | ProfileListener_executor_policy                                 | ALL          | {public}        | (is_admin() OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "ProfileListener"."sharerId")))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | (is_admin() OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "ProfileListener"."sharerId")))))                                                                                                                                                                                                                                                             |
| public      | ProfileListener                   | ProfileListener_own_policy                                      | ALL          | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("listenerId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("listenerId" = auth.uid()))                                                                                                                                                                                                                                                                                                           |
| public      | ProfileListener                   | Sharers can create listener relationships                       | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileListener"."sharerId")))                                                                                                                                                                                                                                                                                 |
| public      | ProfileListener                   | Sharers can view their followers                                | SELECT       | {public}        | ("sharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileListener                   | Users can manage listener relationships                         | ALL          | {public}        | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileListener"."sharerId")))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileListener"."sharerId")))                                                                                                                                                                                                                                                                                 |
| public      | ProfileListener                   | Users can view listener relationships                           | SELECT       | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "ProfileListener"."sharerId"))) OR (auth.uid() = "listenerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | Admins can do anything                                          | ALL          | {public}        | is_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | is_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | ProfileRole_delete_policy                                       | DELETE       | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("profileId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | ProfileRole_insert_policy                                       | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("profileId" = auth.uid()))                                                                                                                                                                                                                                                                                                            |
| public      | ProfileRole                       | ProfileRole_select_policy                                       | SELECT       | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("profileId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | ProfileRole_update_policy                                       | UPDATE       | {public}        | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("profileId" = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | ((( SELECT p."isAdmin"
   FROM "Profile" p
  WHERE (p.id = auth.uid())) = true) OR ("profileId" = auth.uid()))                                                                                                                                                                                                                                                                                                            |
| public      | ProfileRole                       | Users can delete own roles                                      | DELETE       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | Users can insert own roles                                      | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileRole                       | Users can update own roles                                      | UPDATE       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileRole                       | Users can view own roles                                        | SELECT       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | Users can view their own profile roles                          | SELECT       | {public}        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | allow_sharer_role_visibility                                    | SELECT       | {authenticated} | (role = 'SHARER'::"Role")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileRole                       | prevent_self_admin_elevation                                    | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((role <> 'ADMIN'::"Role") OR (( SELECT auth.uid() AS uid) <> "profileId"))                                                                                                                                                                                                                                                                                                                                               |
| public      | ProfileSharer                     | Admins can do anything                                          | ALL          | {public}        | is_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | is_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileSharer                     | Enable read access for authenticated users                      | SELECT       | {public}        | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileSharer                     | Executors can access assigned ProfileSharer                     | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "ProfileSharer".id))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileSharer                     | ProfileSharer_admin_policy                                      | ALL          | {public}        | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileSharer                     | ProfileSharer_executor_policy                                   | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "ProfileSharer".id))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM "ProfileExecutor" pe
  WHERE ((pe."executorId" = auth.uid()) AND (pe."sharerId" = "ProfileSharer".id))))                                                                                                                                                                                                                                                                                       |
| public      | ProfileSharer                     | ProfileSharer_owner_policy                                      | ALL          | {public}        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileSharer                     | Sharers can access their own ProfileSharer                      | ALL          | {public}        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileSharer                     | Users can delete own sharer profile                             | DELETE       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ProfileSharer                     | Users can insert own sharer profile                             | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileSharer                     | Users can update own sharer profile                             | UPDATE       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | ProfileSharer                     | Users can view own sharer profile                               | SELECT       | {public}        | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Prompt                            | Allow SELECT on prompts to all users                            | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Prompt                            | Anyone can view prompts                                         | SELECT       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptCategory                    | Allow SELECT on prompt categories to all users                  | SELECT       | {public}        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptCategory                    | Anyone can view prompt categories                               | SELECT       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Executors can delete sharer's responses                         | DELETE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Executors can insert sharer's responses                         | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                            |
| public      | PromptResponse                    | Executors can manage prompt responses                           | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Executors can update sharer's responses                         | UPDATE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                            |
| public      | PromptResponse                    | Executors can view sharer's responses                           | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Listeners can view prompt responses from sharers they follow    | SELECT       | {public}        | ((EXISTS ( SELECT 1
   FROM "ProfileListener" pl
  WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = "PromptResponse"."profileSharerId") AND (pl."hasAccess" = true)))) AND ("privacyLevel" = 'Public'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | PromptResponse_delete_policy                                    | DELETE       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | PromptResponse_insert_policy                                    | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | PromptResponse_manage_policy                                    | ALL          | {public}        | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ((auth.role() = 'ADMIN'::text) OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                   |
| public      | PromptResponse                    | PromptResponse_update_policy                                    | UPDATE       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Service role can manage all prompt responses                    | ALL          | {service_role}  | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Sharers can access their own prompt responses                   | ALL          | {public}        | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                             |
| public      | PromptResponse                    | Users can manage own prompt responses                           | ALL          | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "PromptResponse"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "PromptResponse"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                  |
| public      | PromptResponse                    | Users can manage prompt responses                               | ALL          | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "PromptResponse"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId")))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "PromptResponse"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId")))))                                                                                       |
| public      | PromptResponse                    | Users can view own prompt responses                             | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "PromptResponse"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponse                    | Users can view prompt responses                                 | SELECT       | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "PromptResponse"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponse"."profileSharerId")))) OR (EXISTS ( SELECT 1
   FROM "ProfileListener"
  WHERE (("ProfileListener"."listenerId" = auth.uid()) AND ("ProfileListener"."sharerId" = "PromptResponse"."profileSharerId") AND ("ProfileListener"."hasAccess" = true)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | Allow promptResponseAttachment inserts for owners               | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ("profileSharerId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                          |
| public      | PromptResponseAttachment          | Executors can delete sharer's attachments                       | DELETE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | Executors can insert sharer's attachments                       | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                  |
| public      | PromptResponseAttachment          | Executors can manage prompt response attachments                | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | Executors can update sharer's attachments                       | UPDATE       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                  |
| public      | PromptResponseAttachment          | Executors can view sharer's attachments                         | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "PromptResponseAttachment"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | Listeners can view attachments from accessible prompt responses | SELECT       | {public}        | (EXISTS ( SELECT 1
   FROM "PromptResponse" pr
  WHERE ((pr.id = "PromptResponseAttachment"."promptResponseId") AND (pr."privacyLevel" = 'Public'::text) AND (EXISTS ( SELECT 1
           FROM "ProfileListener" pl
          WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = pr."profileSharerId") AND (pl."hasAccess" = true)))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | PromptResponseAttachment_delete_policy                          | DELETE       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | PromptResponseAttachment_insert_policy                          | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | PromptResponseAttachment_manage_policy                          | ALL          | {public}        | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | PromptResponseAttachment_update_policy                          | UPDATE       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachment          | Sharers can access their own attachments                        | ALL          | {public}        | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                             |
| public      | PromptResponseAttachmentPersonTag | Executors can manage prompt response attachment person tags     | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM (("PromptResponseAttachment" pra
     JOIN "ProfileExecutor" pe ON ((pe."executorId" = auth.uid())))
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pra.id = "PromptResponseAttachmentPersonTag"."promptResponseAttachmentId") AND (ps."profileId" = pra."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseAttachmentPersonTag | PromptResponseAttachmentPersonTag_access_policy                 | ALL          | {public}        | (is_admin() OR has_sharer_access(( SELECT pr."profileSharerId"
   FROM ("PromptResponse" pr
     JOIN "PromptResponseAttachment" pra ON ((pr.id = pra."promptResponseId")))
  WHERE (pra.id = "PromptResponseAttachmentPersonTag"."promptResponseAttachmentId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | (is_admin() OR has_sharer_access(( SELECT pr."profileSharerId"
   FROM ("PromptResponse" pr
     JOIN "PromptResponseAttachment" pra ON ((pr.id = pra."promptResponseId")))
  WHERE (pra.id = "PromptResponseAttachmentPersonTag"."promptResponseAttachmentId"))))                                                                                                                                                        |
| public      | PromptResponseAttachmentPersonTag | Sharers can manage their own prompt response attachment person  | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("PromptResponseAttachment" pra
     JOIN "ProfileSharer" ps ON ((ps.id = pra."profileSharerId")))
  WHERE ((pra.id = "PromptResponseAttachmentPersonTag"."promptResponseAttachmentId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | PromptResponseFavorite            | Users can access their own favorites                            | ALL          | {public}        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | PromptResponseRecentlyWatched     | Users can access their own recently watched records             | ALL          | {public}        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ("profileId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | Purchase                          | Users can access their own purchases                            | ALL          | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | ResponsePermission                | ResponsePermission_delete_policy                                | DELETE       | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "PromptResponse" pr ON ((pr."profileSharerId" = ps.id)))
  WHERE (pr.id = "ResponsePermission"."responseId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ResponsePermission                | ResponsePermission_insert_policy                                | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "PromptResponse" pr ON ((pr."profileSharerId" = ps.id)))
  WHERE (pr.id = "ResponsePermission"."responseId"))))                                                                                                                                                                                                                     |
| public      | ResponsePermission                | ResponsePermission_update_policy                                | UPDATE       | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "PromptResponse" pr ON ((pr."profileSharerId" = ps.id)))
  WHERE (pr.id = "ResponsePermission"."responseId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "PromptResponse" pr ON ((pr."profileSharerId" = ps.id)))
  WHERE (pr.id = "ResponsePermission"."responseId"))))                                                                                                                                                                                                                     |
| public      | ResponsePermission                | Sharers can delete permissions for their responses              | DELETE       | {public}        | (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "ResponsePermission"."responseId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | ResponsePermission                | Sharers can insert permissions for their responses              | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "ResponsePermission"."responseId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                               |
| public      | ResponsePermission                | Sharers can update permissions for their responses              | UPDATE       | {public}        | (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "ResponsePermission"."responseId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | (EXISTS ( SELECT 1
   FROM ("PromptResponse" pr
     JOIN "ProfileSharer" ps ON ((pr."profileSharerId" = ps.id)))
  WHERE ((pr.id = "ResponsePermission"."responseId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                               |
| public      | ResponsePermission                | Users can access their own response permissions                 | SELECT       | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Subscription                      | Users can access their own subscriptions                        | ALL          | {public}        | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ("userId" = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | SubscriptionEntitlement           | Users can access their own subscription entitlements            | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM "Subscription" s
  WHERE ((s.id = "SubscriptionEntitlement"."subscriptionId") AND (s."userId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (EXISTS ( SELECT 1
   FROM "Subscription" s
  WHERE ((s.id = "SubscriptionEntitlement"."subscriptionId") AND (s."userId" = auth.uid()))))                                                                                                                                                                                                                                                                                 |
| public      | TopicFavorite                     | Executors can manage topic favorites                            | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "TopicFavorite"."profileId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicFavorite                     | users_can_delete_own_favorites                                  | DELETE       | {authenticated} | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicFavorite                     | users_can_insert_own_favorites                                  | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                |
| public      | TopicFavorite                     | users_can_read_own_favorites                                    | SELECT       | {authenticated} | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicFavorite                     | users_can_view_own_favorites                                    | SELECT       | {public}        | (((role = 'SHARER'::text) AND (EXISTS ( SELECT 1
   FROM "ProfileSharer"
  WHERE (("ProfileSharer".id = "TopicFavorite"."sharerId") AND ("ProfileSharer"."profileId" = auth.uid()))))) OR ((role = 'EXECUTOR'::text) AND (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor".id = "ProfileExecutor"."executorId") AND ("ProfileExecutor"."executorId" = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicQueueItem                    | Executors can manage topic queue items                          | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "TopicQueueItem"."profileId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicQueueItem                    | users_can_delete_own_queue_items                                | DELETE       | {authenticated} | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicQueueItem                    | users_can_insert_own_queue_items                                | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                |
| public      | TopicQueueItem                    | users_can_read_own_queue_items                                  | SELECT       | {authenticated} | ((auth.uid())::text = ("profileId")::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | Executors can manage topic videos                               | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                              |
| public      | TopicVideo                        | Service role can manage all topic videos                        | ALL          | {service_role}  | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | TopicVideo_manage_policy                                        | ALL          | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | TopicVideo_select_policy                                        | SELECT       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | Users can manage own topic videos                               | ALL          | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "TopicVideo"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "TopicVideo"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | Users can view own topic videos                                 | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "TopicVideo"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | topicvideo_insert_policy                                        | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps."profileId" = auth.uid()) AND (ps.id = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | topicvideo_select_policy                                        | SELECT       | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps."profileId" = auth.uid()) AND (ps.id = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideo                        | topicvideo_update_policy                                        | UPDATE       | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps."profileId" = auth.uid()) AND (ps.id = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps."profileId" = auth.uid()) AND (ps.id = "TopicVideo"."profileSharerId"))))                                                                                                                                                                                                                                                                                      |
| public      | TopicVideoDownload                | Executors can manage topic video downloads                      | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM (("TopicVideo" tv
     JOIN "ProfileExecutor" pe ON ((pe."executorId" = auth.uid())))
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((tv."muxAssetId" = "TopicVideoDownload"."muxAssetId") AND (ps."profileId" = tv."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideoDownload                | TopicVideoDownload_manage_policy                                | ALL          | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "TopicVideo" tv ON ((tv."profileSharerId" = ps.id)))
  WHERE (tv."muxAssetId" = "TopicVideoDownload"."muxAssetId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "TopicVideo" tv ON ((tv."profileSharerId" = ps.id)))
  WHERE (tv."muxAssetId" = "TopicVideoDownload"."muxAssetId"))))                                                                                                                                                                                                               |
| public      | TopicVideoTranscript              | Allow service role full access on TopicVideoTranscript          | ALL          | {service_role}  | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideoTranscript              | Allow users to manage their own topic video transcripts         | ALL          | {authenticated} | (EXISTS ( SELECT 1
   FROM ("TopicVideo" tv
     JOIN "ProfileSharer" ps ON ((tv."profileSharerId" = ps.id)))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | (EXISTS ( SELECT 1
   FROM ("TopicVideo" tv
     JOIN "ProfileSharer" ps ON ((tv."profileSharerId" = ps.id)))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                               |
| public      | TopicVideoTranscript              | Allow users to update their own topic video transcripts         | UPDATE       | {authenticated} | (EXISTS ( SELECT 1
   FROM ("TopicVideo" tv
     JOIN "ProfileSharer" ps ON ((tv."profileSharerId" = ps.id)))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | (EXISTS ( SELECT 1
   FROM ("TopicVideo" tv
     JOIN "ProfileSharer" ps ON ((tv."profileSharerId" = ps.id)))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                               |
| public      | TopicVideoTranscript              | Allow users to view their own topic video transcripts           | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM ("TopicVideo" tv
     JOIN "ProfileSharer" ps ON ((tv."profileSharerId" = ps.id)))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideoTranscript              | Executors can manage topic video transcripts                    | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM (("TopicVideo" tv
     JOIN "ProfileExecutor" pe ON ((pe."executorId" = auth.uid())))
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((tv.id = "TopicVideoTranscript"."topicVideoId") AND (ps."profileId" = tv."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | TopicVideoTranscript              | TopicVideoTranscript_manage_policy                              | ALL          | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "TopicVideo" tv ON ((tv."profileSharerId" = ps.id)))
  WHERE (tv.id = "TopicVideoTranscript"."topicVideoId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "TopicVideo" tv ON ((tv."profileSharerId" = ps.id)))
  WHERE (tv.id = "TopicVideoTranscript"."topicVideoId"))))                                                                                                                                                                                                                     |
| public      | TopicVideoTranscript              | TopicVideoTranscript_select_policy                              | SELECT       | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "TopicVideo" tv ON ((tv."profileSharerId" = ps.id)))
  WHERE (tv.id = "TopicVideoTranscript"."topicVideoId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Executors can manage videos                                     | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "Video"."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | (EXISTS ( SELECT 1
   FROM ("ProfileExecutor" pe
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((pe."executorId" = auth.uid()) AND (ps."profileId" = "Video"."profileSharerId"))))                                                                                                                                                                                                                   |
| public      | Video                             | Listeners can view videos from sharers they follow              | SELECT       | {public}        | (EXISTS ( SELECT 1
   FROM "ProfileListener" pl
  WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = "Video"."profileSharerId") AND (pl."hasAccess" = true))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Service role can manage all videos                              | ALL          | {service_role}  | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | true                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Sharers can access their own videos                             | ALL          | {public}        | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ("profileSharerId" = ( SELECT "ProfileSharer".id
   FROM "ProfileSharer"
  WHERE ("ProfileSharer"."profileId" = auth.uid())))                                                                                                                                                                                                                                                                                             |
| public      | Video                             | Users can manage own videos                                     | ALL          | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "Video"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Users can manage videos                                         | ALL          | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Video"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "Video"."profileSharerId")))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Video"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "Video"."profileSharerId")))))                                                                                                         |
| public      | Video                             | Users can view own videos                                       | SELECT       | {authenticated} | (EXISTS ( SELECT 1
   FROM "ProfileSharer" ps
  WHERE ((ps.id = "Video"."profileSharerId") AND (ps."profileId" = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Users can view videos                                           | SELECT       | {public}        | ((auth.uid() IN ( SELECT "ProfileSharer"."profileId"
   FROM "ProfileSharer"
  WHERE ("ProfileSharer".id = "Video"."profileSharerId"))) OR (EXISTS ( SELECT 1
   FROM "ProfileExecutor"
  WHERE (("ProfileExecutor"."executorId" = auth.uid()) AND ("ProfileExecutor"."sharerId" = "Video"."profileSharerId")))) OR (EXISTS ( SELECT 1
   FROM "ProfileListener"
  WHERE (("ProfileListener"."listenerId" = auth.uid()) AND ("ProfileListener"."sharerId" = "Video"."profileSharerId") AND ("ProfileListener"."hasAccess" = true)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Video_manage_policy                                             | ALL          | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Video_select_policy                                             | SELECT       | {public}        | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | Video                             | Video_user_select_policy                                        | SELECT       | {authenticated} | (is_admin() OR has_sharer_access("profileSharerId"))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoDownload                     | Executors can manage video downloads                            | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM (("Video" v
     JOIN "ProfileExecutor" pe ON ((pe."executorId" = auth.uid())))
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((v."muxAssetId" = "VideoDownload"."muxAssetId") AND (ps."profileId" = v."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoDownload                     | Users can create their own downloads                            | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                |
| public      | VideoDownload                     | Users can view their own downloads                              | SELECT       | {authenticated} | (auth.uid() = "profileId")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoDownload                     | VideoDownload_insert_policy                                     | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "Video" v ON ((v."profileSharerId" = ps.id)))
  WHERE (v."muxAssetId" = "VideoDownload"."muxAssetId"))))                                                                                                                                                                                                                            |
| public      | VideoDownload                     | VideoDownload_select_policy                                     | SELECT       | {authenticated} | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "Video" v ON ((v."profileSharerId" = ps.id)))
  WHERE (v."muxAssetId" = "VideoDownload"."muxAssetId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoTranscript                   | Executors can manage video transcripts                          | ALL          | {public}        | (EXISTS ( SELECT 1
   FROM (("Video" v
     JOIN "ProfileExecutor" pe ON ((pe."executorId" = auth.uid())))
     JOIN "ProfileSharer" ps ON ((ps.id = pe."sharerId")))
  WHERE ((v.id = "VideoTranscript"."videoId") AND (ps."profileId" = v."profileSharerId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoTranscript                   | Listeners can view transcripts of accessible videos             | SELECT       | {public}        | ((auth.role() = 'service_role'::text) OR (EXISTS ( SELECT 1
   FROM "Video" v
  WHERE ((v.id = "VideoTranscript"."videoId") AND (EXISTS ( SELECT 1
           FROM "ProfileListener" pl
          WHERE ((pl."listenerId" = auth.uid()) AND (pl."sharerId" = v."profileSharerId") AND (pl."hasAccess" = true))))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | VideoTranscript                   | Sharers can access their own video transcripts                  | ALL          | {public}        | ((auth.role() = 'service_role'::text) OR (EXISTS ( SELECT 1
   FROM ("Video" v
     JOIN "ProfileSharer" ps ON ((v."profileSharerId" = ps.id)))
  WHERE ((v.id = "VideoTranscript"."videoId") AND (ps."profileId" = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | ((auth.role() = 'service_role'::text) OR (EXISTS ( SELECT 1
   FROM ("Video" v
     JOIN "ProfileSharer" ps ON ((v."profileSharerId" = ps.id)))
  WHERE ((v.id = "VideoTranscript"."videoId") AND (ps."profileId" = auth.uid())))))                                                                                                                                                                                       |
| public      | VideoTranscript                   | VideoTranscript_manage_policy                                   | ALL          | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "Video" v ON ((v."profileSharerId" = ps.id)))
  WHERE (v.id = "VideoTranscript"."videoId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "Video" v ON ((v."profileSharerId" = ps.id)))
  WHERE (v.id = "VideoTranscript"."videoId"))))                                                                                                                                                                                                                                       |
| public      | VideoTranscript                   | VideoTranscript_select_policy                                   | SELECT       | {public}        | (is_admin() OR has_sharer_access(( SELECT ps.id
   FROM ("ProfileSharer" ps
     JOIN "Video" v ON ((v."profileSharerId" = ps.id)))
  WHERE (v.id = "VideoTranscript"."videoId"))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _ListenerPromptViews              | allow_delete_listenerpromptviews_admin                          | DELETE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _ListenerPromptViews              | allow_insert_listenerpromptviews_admin                          | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _ListenerPromptViews              | allow_select_listenerpromptviews_authenticated                  | SELECT       | {public}        | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _ListenerPromptViews              | allow_update_listenerpromptviews_admin                          | UPDATE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _ListenerVideoViews               | allow_delete_listenervideoviews_admin                           | DELETE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _ListenerVideoViews               | allow_insert_listenervideoviews_admin                           | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _ListenerVideoViews               | allow_select_listenervideoviews_authenticated                   | SELECT       | {public}        | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _ListenerVideoViews               | allow_update_listenervideoviews_admin                           | UPDATE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _PromptResponseToThematicVideo    | allow_delete_promptresponsetothematicvideo_admin                | DELETE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _PromptResponseToThematicVideo    | allow_insert_promptresponsetothematicvideo_admin                | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _PromptResponseToThematicVideo    | allow_select_promptresponsetothematicvideo_authenticated        | SELECT       | {public}        | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | _PromptResponseToThematicVideo    | allow_update_promptresponsetothematicvideo_admin                | UPDATE       | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| public      | _prisma_migrations                | allow_all_prisma_migrations_admin                               | ALL          | {public}        | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | (current_setting('jwt.claims.role'::text, true) = 'admin'::text)                                                                                                                                                                                                                                                                                                                                                          |
| storage     | objects                           | Allow authenticated deletes                                     | DELETE       | {authenticated} | ((bucket_id = 'attachments'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Allow authenticated reads                                       | SELECT       | {authenticated} | ((bucket_id = 'attachments'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Allow authenticated updates                                     | UPDATE       | {authenticated} | ((bucket_id = 'attachments'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Allow authenticated uploads                                     | INSERT       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((bucket_id = 'attachments'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                             |
| storage     | objects                           | Anyone can upload an avatar.                                    | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | (bucket_id = 'avatars'::text)                                                                                                                                                                                                                                                                                                                                                                                             |
| storage     | objects                           | Attachments are publicly accessible.                            | SELECT       | {public}        | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Authenticated users can upload attachments.                     | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((bucket_id = 'attachments'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                             |
| storage     | objects                           | Avatar images are publicly accessible.                          | SELECT       | {public}        | (bucket_id = 'avatars'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Users can delete their own attachments.                         | DELETE       | {public}        | ((bucket_id = 'attachments'::text) AND (auth.uid() = owner))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Users can delete their own avatar                               | DELETE       | {public}        | ((bucket_id = 'avatars'::text) AND ((auth.uid())::text = split_part(name, '/'::text, 1)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | Users can update their own attachments.                         | UPDATE       | {public}        | ((bucket_id = 'attachments'::text) AND (auth.uid() = owner))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                         |
| storage     | objects                           | Users can upload their own avatar                               | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((bucket_id = 'avatars'::text) AND ((auth.uid())::text = split_part(name, '/'::text, 1)))                                                                                                                                                                                                                                                                                                                                 |
| storage     | objects                           | authed read access                                              | SELECT       | {public}        | (bucket_id = 'avatars'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | authenticated read access to avatars                            | SELECT       | {public}        | ((bucket_id = 'avatars'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | users can delete their own avatar                               | DELETE       | {public}        | ((bucket_id = 'avatars'::text) AND (auth.uid() = (split_part(name, '/'::text, 1))::uuid))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                                      |
| storage     | objects                           | users can upload their own avatar                               | INSERT       | {public}        | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ((bucket_id = 'avatars'::text) AND (auth.uid() = (split_part(name, '/'::text, 1))::uuid))                                                                                                                                                                                                                                                                                                                                 |